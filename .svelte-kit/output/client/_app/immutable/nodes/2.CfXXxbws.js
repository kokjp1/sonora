import"../chunks/DsnmJJEf.js";import{i as Wt}from"../chunks/CZDmPwCq.js";import{o as jt,a as Bt,s as j,e as vt}from"../chunks/CHmOn01Q.js";import{h as st,p as Gt,aX as at,aY as Qt,f as R,z as dt,C as K,i as $,j as Yt,q as u,F as D,aL as x,aT as F,I as P,G as M,a3 as Xt,m as U}from"../chunks/DQBhV38n.js";import{i as J}from"../chunks/tt7bTpbt.js";import{s as Jt}from"../chunks/BT319vO3.js";import{a as Kt,g as Zt,b as te,r as Vt,l as ee}from"../chunks/BaZ8MSrX.js";const kt=[...` 	
\r\fÂ \v\uFEFF`];function ie(r,t,e){var i=r==null?"":""+r;if(t&&(i=i?i+" "+t:t),e){for(var n in e)if(e[n])i=i?i+" "+n:n;else if(i.length)for(var a=n.length,o=0;(o=i.indexOf(n,o))>=0;){var s=o+a;(o===0||kt.includes(i[o-1]))&&(s===i.length||kt.includes(i[s]))?i=(o===0?"":i.substring(0,o))+i.substring(s+1):o=s}}return i===""?null:i}function re(r,t){return r==null?null:String(r)}function _t(r,t,e,i,n,a){var o=r.__className;if(st||o!==e||o===void 0){var s=ie(e,i,a);(!st||s!==r.getAttribute("class"))&&(s==null?r.removeAttribute("class"):r.className=s),r.__className=e}else if(a&&n!==a)for(var l in a){var h=!!a[l];(n==null||h!==!!n[l])&&r.classList.toggle(l,h)}return a}function zt(r,t,e,i){var n=r.__style;if(st||n!==t){var a=re(t);(!st||a!==r.getAttribute("style"))&&(a==null?r.removeAttribute("style"):r.style.cssText=a),r.__style=t}return i}class ne{constructor(t,e){this.pixels=t,this.opts=e;const{sigBits:i}=e,n=(C,E,b)=>(C<<2*i)+(E<<i)+b;this.getColorIndex=n;const a=8-i,o=1<<3*i,s=new Uint32Array(o);let l,h,g,m,v,_,c,d,p,N;l=g=v=0,h=m=_=Number.MAX_VALUE;const k=t.length/4;let q=0;for(;q<k;){const C=q*4;if(q++,c=t[C+0],d=t[C+1],p=t[C+2],N=t[C+3],N===0)continue;c=c>>a,d=d>>a,p=p>>a;const E=n(c,d,p);s[E]===void 0&&(s[E]=0),s[E]+=1,c>l&&(l=c),c<h&&(h=c),d>g&&(g=d),d<m&&(m=d),p>v&&(v=p),p<_&&(_=p)}this._colorCount=s.reduce((C,E)=>E>0?C+1:C,0),this.hist=s,this.rmax=l,this.rmin=h,this.gmax=g,this.gmin=m,this.bmax=v,this.bmin=_}get colorCount(){return this._colorCount}}class ae{scaleDown(t){const e=this.getWidth(),i=this.getHeight();let n=1;if(t.maxDimension>0){const a=Math.max(e,i);a>t.maxDimension&&(n=t.maxDimension/a)}else n=1/t.quality;n<1&&this.resize(e*n,i*n,n)}}function se(r,t){var e;if(t.length>0){const i=r.data,n=i.length/4;let a,o,s,l,h;for(let g=0;g<n;g++){a=g*4,o=i[a+0],s=i[a+1],l=i[a+2],h=i[a+3];for(let m=0;m<t.length;m++)if(!((e=t[m])!=null&&e.call(t,o,s,l,h))){i[a+3]=0;break}}}return r}function oe(r){const t=new URL(r,location.href);return t.protocol===location.protocol&&t.host===location.host&&t.port===location.port}function le(r,t){const e=new URL(r),i=new URL(t);return e.protocol===i.protocol&&e.hostname===i.hostname&&e.port===i.port}class ue extends ae{_getCanvas(){if(!this._canvas)throw new Error("Canvas is not initialized");return this._canvas}_getContext(){if(!this._context)throw new Error("Context is not initialized");return this._context}_getWidth(){if(!this._width)throw new Error("Width is not initialized");return this._width}_getHeight(){if(!this._height)throw new Error("Height is not initialized");return this._height}_initCanvas(){const t=this.image;if(!t)throw new Error("Image is not initialized");const e=this._canvas=document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new ReferenceError("Failed to create canvas context");this._context=i,e.className="@vibrant/canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,i.drawImage(t,0,0),document.body.appendChild(e)}load(t){let e,i;if(typeof t=="string")e=document.createElement("img"),i=t,!oe(i)&&!le(window.location.href,i)&&(e.crossOrigin="anonymous"),e.src=i;else if(t instanceof HTMLImageElement)e=t,i=t.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=e,new Promise((n,a)=>{const o=()=>{this._initCanvas(),n(this)};e.complete?o():(e.onload=o,e.onerror=s=>a(new Error(`Fail to load image: ${i}`)))})}clear(){this._getContext().clearRect(0,0,this._getWidth(),this._getHeight())}update(t){this._getContext().putImageData(t,0,0)}getWidth(){return this._getWidth()}getHeight(){return this._getHeight()}resize(t,e,i){if(!this.image)throw new Error("Image is not initialized");this._width=this._getCanvas().width=t,this._height=this._getCanvas().height=e,this._getContext().scale(i,i),this._getContext().drawImage(this.image,0,0)}getPixelCount(){return this._getWidth()*this._getHeight()}getImageData(){return this._getContext().getImageData(0,0,this._getWidth(),this._getHeight())}remove(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}}function tt(r,...t){return t.forEach(e=>{if(e){for(const i in e)if(e.hasOwnProperty(i)){const n=e[i];Array.isArray(n)?r[i]=n.slice(0):typeof n=="object"?(r[i]||(r[i]={}),tt(r[i],n)):r[i]=n}}}),r}function he(r,t){const{colorCount:e,quantizer:i,generators:n,filters:a}=r,o={colorCount:e},s=typeof i=="string"?{name:i,options:{}}:i;return s.options=tt({},o,s.options),tt({},{quantizer:s,generators:n,filters:a},t)}class ce{constructor(t,e={}){this._src=t,this._opts=tt({},B.DefaultOpts,e)}maxColorCount(t){return this._opts.colorCount=t,this}maxDimension(t){return this._opts.maxDimension=t,this}addFilter(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this}removeFilter(t){if(this._opts.filters){const e=this._opts.filters.indexOf(t);e>0&&this._opts.filters.splice(e)}return this}clearFilters(){return this._opts.filters=[],this}quality(t){return this._opts.quality=t,this}useImageClass(t){return this._opts.ImageClass=t,this}useGenerator(t,e){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(e?{name:t,options:e}:t),this}useQuantizer(t,e){return this._opts.quantizer=e?{name:t,options:e}:t,this}build(){return new B(this._src,this._opts)}getPalette(){return this.build().getPalette()}}class bt{constructor(t){this.pipeline=t,this._map={}}names(){return Object.keys(this._map)}has(t){return!!this._map[t]}get(t){return this._map[t]}register(t,e){return this._map[t]=e,this.pipeline}}class ge{constructor(){this.filter=new bt(this),this.quantizer=new bt(this),this.generator=new bt(this)}_buildProcessTasks({filters:t,quantizer:e,generators:i}){return i.length===1&&i[0]==="*"&&(i=this.generator.names()),{filters:t.map(a=>n(this.filter,a)),quantizer:n(this.quantizer,e),generators:i.map(a=>n(this.generator,a))};function n(a,o){let s,l;return typeof o=="string"?s=o:(s=o.name,l=o.options),{name:s,fn:a.get(s),options:l}}}async process(t,e){const{filters:i,quantizer:n,generators:a}=this._buildProcessTasks(e),o=await this._filterColors(i,t),s=await this._generateColors(n,o),l=await this._generatePalettes(a,s);return{colors:s,palettes:l}}_filterColors(t,e){return Promise.resolve(se(e,t.map(({fn:i})=>i)))}_generateColors(t,e){return Promise.resolve(t.fn(e.data,t.options))}async _generatePalettes(t,e){const i=await Promise.all(t.map(({fn:n,options:a})=>Promise.resolve(n(e,a))));return Promise.resolve(i.reduce((n,a,o)=>(n[t[o].name]=a,n),{}))}}function fe(r,t,e){return"#"+((1<<24)+(r<<16)+(t<<8)+e).toString(16).slice(1,7)}function me(r,t,e){r/=255,t/=255,e/=255;const i=Math.max(r,t,e),n=Math.min(r,t,e);let a=0,o=0;const s=(i+n)/2;if(i!==n){const l=i-n;switch(o=s>.5?l/(2-i-n):l/(i+n),i){case r:a=(t-e)/l+(t<e?6:0);break;case t:a=(e-r)/l+2;break;case e:a=(r-t)/l+4;break}a/=6}return[a,o,s]}function W(r,t,e){let i,n,a;function o(s,l,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?s+(l-s)*6*h:h<1/2?l:h<2/3?s+(l-s)*(2/3-h)*6:s}if(t===0)i=n=a=e;else{const s=e<.5?e*(1+t):e+t-e*t,l=2*e-s;i=o(l,s,r+1/3),n=o(l,s,r),a=o(l,s,r-1/3)}return[i*255,n*255,a*255]}class O{static applyFilters(t,e){return e.length>0?t.filter(({r:i,g:n,b:a})=>{var o;for(let s=0;s<e.length;s++)if(!((o=e[s])!=null&&o.call(e,i,n,a,255)))return!1;return!0}):t}static clone(t){return new O(t._rgb,t._population)}get r(){return this._rgb[0]}get g(){return this._rgb[1]}get b(){return this._rgb[2]}get rgb(){return this._rgb}get hsl(){if(!this._hsl){const[t,e,i]=this._rgb;this._hsl=me(t,e,i)}return this._hsl}get hex(){if(!this._hex){const[t,e,i]=this._rgb;this._hex=fe(t,e,i)}return this._hex}get population(){return this._population}toJSON(){return{rgb:this.rgb,population:this.population}}getYiq(){if(!this._yiq){const t=this._rgb;this._yiq=(t[0]*299+t[1]*587+t[2]*114)/1e3}return this._yiq}get titleTextColor(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor}get bodyTextColor(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor}constructor(t,e){this._rgb=t,this._population=e}}const Tt=class wt{constructor(t,e){this._src=t,this.opts=tt({},wt.DefaultOpts,e)}static use(t){this._pipeline=t}static from(t){return new ce(t)}get result(){return this._result}_process(t,e){t.scaleDown(this.opts);const i=he(this.opts,e);return wt._pipeline.process(t.getImageData(),i)}async getPalette(){const t=new this.opts.ImageClass;try{const e=await t.load(this._src),i=await this._process(e,{generators:["default"]});this._result=i;const n=i.palettes.default;if(!n)throw new Error("Something went wrong and a palette was not found, please file a bug against our GitHub repo: https://github.com/vibrant-Colors/node-vibrant/");return t.remove(),n}catch(e){return t.remove(),Promise.reject(e)}}async getPalettes(){const t=new this.opts.ImageClass;try{const e=await t.load(this._src),i=await this._process(e,{generators:["*"]});this._result=i;const n=i.palettes;return t.remove(),n}catch(e){return t.remove(),Promise.reject(e)}}};Tt.DefaultOpts={colorCount:64,quality:5,filters:[]};let B=Tt;B.DefaultOpts.quantizer="mmcq";B.DefaultOpts.generators=["default"];B.DefaultOpts.filters=["default"];B.DefaultOpts.ImageClass=ue;const yt=5,pt=8-yt;class ot{constructor(t,e,i,n,a,o,s){this.histogram=s,this._volume=-1,this._avg=null,this._count=-1,this.dimension={r1:t,r2:e,g1:i,g2:n,b1:a,b2:o}}static build(t){const e=new ne(t,{sigBits:yt}),{rmin:i,rmax:n,gmin:a,gmax:o,bmin:s,bmax:l}=e;return new ot(i,n,a,o,s,l,e)}invalidate(){this._volume=this._count=-1,this._avg=null}volume(){if(this._volume<0){const{r1:t,r2:e,g1:i,g2:n,b1:a,b2:o}=this.dimension;this._volume=(e-t+1)*(n-i+1)*(o-a+1)}return this._volume}count(){if(this._count<0){const{hist:t,getColorIndex:e}=this.histogram,{r1:i,r2:n,g1:a,g2:o,b1:s,b2:l}=this.dimension;let h=0;for(let g=i;g<=n;g++)for(let m=a;m<=o;m++)for(let v=s;v<=l;v++){const _=e(g,m,v);t[_]&&(h+=t[_])}this._count=h}return this._count}clone(){const{histogram:t}=this,{r1:e,r2:i,g1:n,g2:a,b1:o,b2:s}=this.dimension;return new ot(e,i,n,a,o,s,t)}avg(){if(!this._avg){const{hist:t,getColorIndex:e}=this.histogram,{r1:i,r2:n,g1:a,g2:o,b1:s,b2:l}=this.dimension;let h=0;const g=1<<8-yt;let m,v,_;m=v=_=0;for(let c=i;c<=n;c++)for(let d=a;d<=o;d++)for(let p=s;p<=l;p++){const N=e(c,d,p),k=t[N];k&&(h+=k,m+=k*(c+.5)*g,v+=k*(d+.5)*g,_+=k*(p+.5)*g)}h?this._avg=[~~(m/h),~~(v/h),~~(_/h)]:this._avg=[~~(g*(i+n+1)/2),~~(g*(a+o+1)/2),~~(g*(s+l+1)/2)]}return this._avg}contains(t){let[e,i,n]=t;const{r1:a,r2:o,g1:s,g2:l,b1:h,b2:g}=this.dimension;return e>>=pt,i>>=pt,n>>=pt,e>=a&&e<=o&&i>=s&&i<=l&&n>=h&&n<=g}split(){const{hist:t,getColorIndex:e}=this.histogram,{r1:i,r2:n,g1:a,g2:o,b1:s,b2:l}=this.dimension,h=this.count();if(!h)return[];if(h===1)return[this.clone()];const g=n-i+1,m=o-a+1,v=l-s+1,_=Math.max(g,m,v);let c=null,d,p;d=p=0;let N=null;if(_===g){N="r",c=new Uint32Array(n+1);for(let b=i;b<=n;b++){d=0;for(let y=a;y<=o;y++)for(let S=s;S<=l;S++){const T=e(b,y,S);t[T]&&(d+=t[T])}p+=d,c[b]=p}}else if(_===m){N="g",c=new Uint32Array(o+1);for(let b=a;b<=o;b++){d=0;for(let y=i;y<=n;y++)for(let S=s;S<=l;S++){const T=e(y,b,S);t[T]&&(d+=t[T])}p+=d,c[b]=p}}else{N="b",c=new Uint32Array(l+1);for(let b=s;b<=l;b++){d=0;for(let y=i;y<=n;y++)for(let S=a;S<=o;S++){const T=e(y,S,b);t[T]&&(d+=t[T])}p+=d,c[b]=p}}let k=-1;const q=new Uint32Array(c.length);for(let b=0;b<c.length;b++){const y=c[b];y&&(k<0&&y>p/2&&(k=b),q[b]=p-y)}const C=this;function E(b){const y=b+"1",S=b+"2",T=C.dimension[y];let V=C.dimension[S];const et=C.clone(),it=C.clone(),rt=k-T,nt=V-k;for(rt<=nt?(V=Math.min(V-1,~~(k+nt/2)),V=Math.max(0,V)):(V=Math.max(T,~~(k-1-rt/2)),V=Math.min(C.dimension[S],V));!c[V];)V++;let f=q[V];for(;!f&&c[V-1];)f=q[--V];return et.dimension[S]=V,it.dimension[y]=V+1,[et,it]}return E(N)}}class It{_sort(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)}constructor(t){this._comparator=t,this.contents=[],this._sorted=!1}push(t){this.contents.push(t),this._sorted=!1}peek(t){return this._sort(),t=typeof t=="number"?t:this.contents.length-1,this.contents[t]}pop(){return this._sort(),this.contents.pop()}size(){return this.contents.length}map(t){return this._sort(),this.contents.map(t)}}const ve=.75;function Pt(r,t){let e=r.size();for(;r.size()<t;){const i=r.pop();if(i&&i.count()>0){const[n,a]=i.split();if(!n||(r.push(n),a&&a.count()>0&&r.push(a),r.size()===e))break;e=r.size()}else break}}const de=(r,t)=>{if(r.length===0||t.colorCount<2||t.colorCount>256)throw new Error("Wrong MMCQ parameters");const e=ot.build(r);e.histogram.colorCount;const i=new It((a,o)=>a.count()-o.count());i.push(e),Pt(i,ve*t.colorCount);const n=new It((a,o)=>a.count()*a.volume()-o.count()*o.volume());return n.contents=i.contents,Pt(n,t.colorCount-n.size()),_e(n)};function _e(r){const t=[];for(;r.size();){const e=r.pop(),i=e.avg();t.push(new O(i,e.count()))}return t}const be={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function pe(r){let t=0;return r.forEach(e=>{t=Math.max(t,e.population)}),t}function we(r,t){return r.Vibrant===t||r.DarkVibrant===t||r.LightVibrant===t||r.Muted===t||r.DarkMuted===t||r.LightMuted===t}function ye(r,t,e,i,n,a,o){function s(...h){let g=0,m=0;for(let v=0;v<h.length;v+=2){const _=h[v],c=h[v+1];!_||!c||(g+=_*c,m+=c)}return g/m}function l(h,g){return 1-Math.abs(h-g)}return s(l(r,t),o.weightSaturation,l(e,i),o.weightLuma,n/a,o.weightPopulation)}function Z(r,t,e,i,n,a,o,s,l,h){let g=null,m=0;return t.forEach(v=>{const[,_,c]=v.hsl;if(_>=s&&_<=l&&c>=n&&c<=a&&!we(r,v)){const d=ye(_,o,c,i,v.population,e,h);(g===null||d>m)&&(g=v,m=d)}}),g}function xe(r,t,e){const i={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return i.Vibrant=Z(i,r,t,e.targetNormalLuma,e.minNormalLuma,e.maxNormalLuma,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),i.LightVibrant=Z(i,r,t,e.targetLightLuma,e.minLightLuma,1,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),i.DarkVibrant=Z(i,r,t,e.targetDarkLuma,0,e.maxDarkLuma,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),i.Muted=Z(i,r,t,e.targetNormalLuma,e.minNormalLuma,e.maxNormalLuma,e.targetMutesSaturation,0,e.maxMutesSaturation,e),i.LightMuted=Z(i,r,t,e.targetLightLuma,e.minLightLuma,1,e.targetMutesSaturation,0,e.maxMutesSaturation,e),i.DarkMuted=Z(i,r,t,e.targetDarkLuma,0,e.maxDarkLuma,e.targetMutesSaturation,0,e.maxMutesSaturation,e),i}function Ce(r,t,e){if(!r.Vibrant&&!r.DarkVibrant&&!r.LightVibrant){if(!r.DarkVibrant&&r.DarkMuted){let[i,n,a]=r.DarkMuted.hsl;a=e.targetDarkLuma,r.DarkVibrant=new O(W(i,n,a),0)}if(!r.LightVibrant&&r.LightMuted){let[i,n,a]=r.LightMuted.hsl;a=e.targetDarkLuma,r.DarkVibrant=new O(W(i,n,a),0)}}if(!r.Vibrant&&r.DarkVibrant){let[i,n,a]=r.DarkVibrant.hsl;a=e.targetNormalLuma,r.Vibrant=new O(W(i,n,a),0)}else if(!r.Vibrant&&r.LightVibrant){let[i,n,a]=r.LightVibrant.hsl;a=e.targetNormalLuma,r.Vibrant=new O(W(i,n,a),0)}if(!r.DarkVibrant&&r.Vibrant){let[i,n,a]=r.Vibrant.hsl;a=e.targetDarkLuma,r.DarkVibrant=new O(W(i,n,a),0)}if(!r.LightVibrant&&r.Vibrant){let[i,n,a]=r.Vibrant.hsl;a=e.targetLightLuma,r.LightVibrant=new O(W(i,n,a),0)}if(!r.Muted&&r.Vibrant){let[i,n,a]=r.Vibrant.hsl;a=e.targetMutesSaturation,r.Muted=new O(W(i,n,a),0)}if(!r.DarkMuted&&r.DarkVibrant){let[i,n,a]=r.DarkVibrant.hsl;a=e.targetMutesSaturation,r.DarkMuted=new O(W(i,n,a),0)}if(!r.LightMuted&&r.LightVibrant){let[i,n,a]=r.LightVibrant.hsl;a=e.targetMutesSaturation,r.LightMuted=new O(W(i,n,a),0)}}const Le=(r,t)=>{t=Object.assign({},be,t);const e=pe(r),i=xe(r,e,t);return Ce(i,e,t),i},De=new ge().filter.register("default",(r,t,e,i)=>i>=125&&!(r>250&&t>250&&e>250)).quantizer.register("mmcq",de).generator.register("default",Le);B.use(De);var Me=R('<button class="svelte-1uha8ag">Sign Out</button>'),Se=R('<button class="svelte-1uha8ag">Sign In</button>'),Ve=R('<p class="err svelte-1uha8ag"> </p>'),ke=R('<div class="svelte-1uha8ag"></div>'),ze=R('<img class="cover svelte-1uha8ag" alt="album art" width="520" height="520"/>'),Ie=R('<div class="layout svelte-1uha8ag"><div class="left svelte-1uha8ag"><h1 class="title svelte-1uha8ag"> </h1> <div class="sub svelte-1uha8ag"> </div> <div class="progress svelte-1uha8ag"><!></div> <div class="times svelte-1uha8ag"> </div> <section class="info svelte-1uha8ag"><h3 class="svelte-1uha8ag">General Track Information</h3> <div class="kv svelte-1uha8ag"><div> </div> <div> </div></div></section></div> <div class="right svelte-1uha8ag"><div class="artwrap svelte-1uha8ag"><!> <div aria-hidden="true"></div></div></div></div>'),Pe=R('<div class="playing-zero svelte-1uha8ag" role="region" aria-label="Nothing is playing"><div class="zero-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Nothing is playing</h2> <p class="lead svelte-1uha8ag">Start playback on any Spotify device to show album art and the vinyl visualizer.</p> <p class="hint svelte-1uha8ag">Tip: open Spotify on your phone, laptop or web player and press play.</p></div></div>'),Te=R("<!> <!>",1),Ee=R('<p class="err svelte-1uha8ag"> </p>'),Oe=R('<!> <div class="zero-state svelte-1uha8ag" role="region" aria-label="Sign in to Sonora"><div class="zero-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Youâre signed out</h2> <p class="lead svelte-1uha8ag">Sign in with Spotify to show currently playing tracks, album art and the vinyl visualizer.</p> <button class="btn svelte-1uha8ag">Sign in with Spotify</button> <p class="hint svelte-1uha8ag">No account? Visit <a href="https://spotify.com" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">spotify.com</a>.</p></div></div>',1),Ne=R("<div><span></span> <span> </span> <!></div> <!>",1);function We(r,t){Gt(t,!1);const e=F(),i=F(),n=F();let o=["Vibrant","DarkVibrant","DarkMuted","Muted"];{try{const f=new URL(location.href).searchParams.get("swatch");f&&(o=f.split(",").map(w=>w.trim()).filter(Boolean))}catch{}window.__VIBRANT_SWATCH_ORDER=o}let s=F(!1),l=F(null),h=F(null),g=null,m=F(null),v,_=F(null),c=F(null);function d(f){const w=Math.floor((f||0)/1e3),L=Math.floor(w/60),A=String(w%60).padStart(2,"0");return`${L}:${A}`}async function p(){try{const f=await Zt();x(l,f||null),x(m,null);const w=f?.item?.id||null;w&&w!==g&&(g=w,x(h,f?.item?.popularity==null?await te(w):null))}catch(f){x(m,String(f))}}function N(){ee(),x(s,!1),x(l,null),x(h,null),g=null,v&&(clearInterval(v),v=null)}async function k(f){try{if(!f){x(_,null),x(c,null);return}const w=await B.from(f).getPalette();let L=null;for(const A of o)if(w?.[A]){L=w[A];break}if(L||(L=Object.values(w).find(Boolean)||null),L?.rgb){const[A,G,Q]=L.rgb;x(_,`rgba(${Math.round(A)}, ${Math.round(G)}, ${Math.round(Q)}, 1)`),x(c,`rgba(${Math.round(A)}, ${Math.round(G)}, ${Math.round(Q)}, 1)`)}else L?.hex?(x(_,L.hex),x(c,L.hex)):(x(_,null),x(c,null))}catch{x(_,null),x(c,null)}}jt(async()=>{x(s,Kt()),u(s)&&(await p(),v=setInterval(p,1e3))}),Bt(()=>{v&&clearInterval(v)}),at(()=>u(l),()=>{x(e,u(l)?.item)}),at(()=>u(e),()=>{x(i,u(e)?.album?.images?.[0]?.url||"")}),at(()=>(u(e),u(h)),()=>{x(n,u(e)?.popularity??u(h)?.popularity??null)}),at(()=>u(i),()=>{u(i)&&k(u(i))}),Qt(),Wt();var q=Ne(),C=dt(q);let E;var b=D(C),y=P(b,2),S=D(y);M(y);var T=P(y,2);{var V=f=>{var w=Me();vt("click",w,N),$(f,w)},et=f=>{var w=Se();vt("click",w,function(...L){Vt?.apply(this,L)}),$(f,w)};J(T,f=>{u(s)?f(V):f(et,!1)})}M(C);var it=P(C,2);{var rt=f=>{var w=Te(),L=dt(w);{var A=z=>{var I=Ve(),Y=D(I,!0);M(I),K(()=>j(Y,u(m))),$(z,I)};J(L,z=>{u(m)&&z(A)})}var G=P(L,2);{var Q=z=>{var I=Ie(),Y=D(I),ut=D(Y),Et=D(ut,!0);M(ut);var ht=P(ut,2),Ot=D(ht);M(ht);var ct=P(ht,2),Nt=D(ct);{var At=H=>{var X=ke();K(mt=>zt(X,mt),[()=>(u(l),u(e),U(()=>`width:${Math.min(100,100*(u(l)?.progress_ms||0)/u(e).duration_ms)}%`))]),$(H,X)};J(Nt,H=>{u(e),U(()=>u(e).duration_ms)&&H(At)})}M(ct);var gt=P(ct,2),Ht=D(gt);M(gt);var xt=P(gt,2),Ct=P(D(xt),2),ft=D(Ct),$t=D(ft);M(ft);var Lt=P(ft,2),Rt=D(Lt);M(Lt),M(Ct),M(xt),M(Y);var Dt=P(Y,2),Mt=D(Dt),St=D(Mt);{var qt=H=>{var X=ze();K(()=>Jt(X,"src",u(i))),$(H,X)};J(St,H=>{u(i)&&H(qt)})}var Ut=P(St,2);M(Mt),M(Dt),M(I),K((H,X,mt,Ft)=>{zt(I,`--label:url(${u(i)}); --glow:${u(_)??""}; --glow-soft:${u(c)??""};`),j(Et,(u(e),U(()=>u(e).name))),j(Ot,`${H??""} â¢ ${u(e),U(()=>u(e).album?.name)??""}`),j(Ht,`${X??""} / ${mt??""}
                    ${u(l),U(()=>u(l)?.is_playing?"â¢ Playing":"â¢ Paused")??""}`),j($t,`â³ Duur: ${Ft??""}`),j(Rt,`ð¥ Populariteit: ${u(n)??"â"??""}`),_t(Ut,1,`vinyl ${u(l),U(()=>u(l)?.is_playing?"spinning":"")??""}`,"svelte-1uha8ag")},[()=>(u(e),U(()=>u(e).artists?.map(H=>H.name).join(", "))),()=>(u(l),U(()=>d(u(l)?.progress_ms))),()=>(u(e),U(()=>d(u(e).duration_ms))),()=>(u(e),U(()=>d(u(e).duration_ms)))]),$(z,I)},lt=z=>{var I=Pe();$(z,I)};J(G,z=>{u(e)?z(Q):z(lt,!1)})}$(f,w)},nt=f=>{var w=Oe(),L=dt(w);{var A=z=>{var I=Ee(),Y=D(I,!0);M(I),K(()=>j(Y,u(m))),$(z,I)};J(L,z=>{u(m)&&z(A)})}var G=P(L,2),Q=D(G),lt=P(D(Q),4);Xt(2),M(Q),M(G),vt("click",lt,function(...z){Vt?.apply(this,z)}),$(f,w)};J(it,f=>{u(s)?f(rt):f(nt,!1)})}K(f=>{E=_t(C,1,"status svelte-1uha8ag",null,E,f),_t(b,1,`dot ${u(s)?"green":"red"}`,"svelte-1uha8ag"),j(S,`Status: ${u(s)?"Connected":"Disconnected"}`)},[()=>({connected:u(s),disconnected:!u(s)})]),$(r,q),Yt()}export{We as component};
