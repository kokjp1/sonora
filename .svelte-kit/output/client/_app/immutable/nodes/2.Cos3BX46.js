import"../chunks/DsnmJJEf.js";import{i as jt}from"../chunks/CZDmPwCq.js";import{o as Gt,a as Qt,s as B,e as dt}from"../chunks/CHmOn01Q.js";import{h as ot,p as Yt,aX as tt,aY as Xt,f as $,z as _t,C as K,i as H,j as Jt,q as h,F as D,aL as x,aT as F,I as z,G as M,a3 as Kt,m as q}from"../chunks/DQBhV38n.js";import{i as J}from"../chunks/tt7bTpbt.js";import{s as Zt}from"../chunks/BT319vO3.js";import{a as te,g as ee,b as ie,r as kt,l as re}from"../chunks/BaZ8MSrX.js";const ne=!0,Tt=[...` 	
\r\fÂ \v\uFEFF`];function ae(r,t,e){var i=r==null?"":""+r;if(t&&(i=i?i+" "+t:t),e){for(var n in e)if(e[n])i=i?i+" "+n:n;else if(i.length)for(var a=n.length,s=0;(s=i.indexOf(n,s))>=0;){var o=s+a;(s===0||Tt.includes(i[s-1]))&&(o===i.length||Tt.includes(i[o]))?i=(s===0?"":i.substring(0,s))+i.substring(o+1):s=o}}return i===""?null:i}function se(r,t){return r==null?null:String(r)}function bt(r,t,e,i,n,a){var s=r.__className;if(ot||s!==e||s===void 0){var o=ae(e,i,a);(!ot||o!==r.getAttribute("class"))&&(o==null?r.removeAttribute("class"):r.className=o),r.__className=e}else if(a&&n!==a)for(var l in a){var u=!!a[l];(n==null||u!==!!n[l])&&r.classList.toggle(l,u)}return a}function It(r,t,e,i){var n=r.__style;if(ot||n!==t){var a=se(t);(!ot||a!==r.getAttribute("style"))&&(a==null?r.removeAttribute("style"):r.style.cssText=a),r.__style=t}return i}const oe=ne;class le{constructor(t,e){this.pixels=t,this.opts=e;const{sigBits:i}=e,n=(V,O,_)=>(V<<2*i)+(O<<i)+_;this.getColorIndex=n;const a=8-i,s=1<<3*i,o=new Uint32Array(s);let l,u,c,v,b,p,g,f,d,E;l=c=b=0,u=v=p=Number.MAX_VALUE;const S=t.length/4;let U=0;for(;U<S;){const V=U*4;if(U++,g=t[V+0],f=t[V+1],d=t[V+2],E=t[V+3],E===0)continue;g=g>>a,f=f>>a,d=d>>a;const O=n(g,f,d);o[O]===void 0&&(o[O]=0),o[O]+=1,g>l&&(l=g),g<u&&(u=g),f>c&&(c=f),f<v&&(v=f),d>b&&(b=d),d<p&&(p=d)}this._colorCount=o.reduce((V,O)=>O>0?V+1:V,0),this.hist=o,this.rmax=l,this.rmin=u,this.gmax=c,this.gmin=v,this.bmax=b,this.bmin=p}get colorCount(){return this._colorCount}}class ue{scaleDown(t){const e=this.getWidth(),i=this.getHeight();let n=1;if(t.maxDimension>0){const a=Math.max(e,i);a>t.maxDimension&&(n=t.maxDimension/a)}else n=1/t.quality;n<1&&this.resize(e*n,i*n,n)}}function he(r,t){var e;if(t.length>0){const i=r.data,n=i.length/4;let a,s,o,l,u;for(let c=0;c<n;c++){a=c*4,s=i[a+0],o=i[a+1],l=i[a+2],u=i[a+3];for(let v=0;v<t.length;v++)if(!((e=t[v])!=null&&e.call(t,s,o,l,u))){i[a+3]=0;break}}}return r}function ce(r){const t=new URL(r,location.href);return t.protocol===location.protocol&&t.host===location.host&&t.port===location.port}function ge(r,t){const e=new URL(r),i=new URL(t);return e.protocol===i.protocol&&e.hostname===i.hostname&&e.port===i.port}class fe extends ue{_getCanvas(){if(!this._canvas)throw new Error("Canvas is not initialized");return this._canvas}_getContext(){if(!this._context)throw new Error("Context is not initialized");return this._context}_getWidth(){if(!this._width)throw new Error("Width is not initialized");return this._width}_getHeight(){if(!this._height)throw new Error("Height is not initialized");return this._height}_initCanvas(){const t=this.image;if(!t)throw new Error("Image is not initialized");const e=this._canvas=document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new ReferenceError("Failed to create canvas context");this._context=i,e.className="@vibrant/canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,i.drawImage(t,0,0),document.body.appendChild(e)}load(t){let e,i;if(typeof t=="string")e=document.createElement("img"),i=t,!ce(i)&&!ge(window.location.href,i)&&(e.crossOrigin="anonymous"),e.src=i;else if(t instanceof HTMLImageElement)e=t,i=t.src;else return Promise.reject(new Error("Cannot load buffer as an image in browser"));return this.image=e,new Promise((n,a)=>{const s=()=>{this._initCanvas(),n(this)};e.complete?s():(e.onload=s,e.onerror=o=>a(new Error(`Fail to load image: ${i}`)))})}clear(){this._getContext().clearRect(0,0,this._getWidth(),this._getHeight())}update(t){this._getContext().putImageData(t,0,0)}getWidth(){return this._getWidth()}getHeight(){return this._getHeight()}resize(t,e,i){if(!this.image)throw new Error("Image is not initialized");this._width=this._getCanvas().width=t,this._height=this._getCanvas().height=e,this._getContext().scale(i,i),this._getContext().drawImage(this.image,0,0)}getPixelCount(){return this._getWidth()*this._getHeight()}getImageData(){return this._getContext().getImageData(0,0,this._getWidth(),this._getHeight())}remove(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)}}function et(r,...t){return t.forEach(e=>{if(e){for(const i in e)if(e.hasOwnProperty(i)){const n=e[i];Array.isArray(n)?r[i]=n.slice(0):typeof n=="object"?(r[i]||(r[i]={}),et(r[i],n)):r[i]=n}}}),r}function me(r,t){const{colorCount:e,quantizer:i,generators:n,filters:a}=r,s={colorCount:e},o=typeof i=="string"?{name:i,options:{}}:i;return o.options=et({},s,o.options),et({},{quantizer:o,generators:n,filters:a},t)}class ve{constructor(t,e={}){this._src=t,this._opts=et({},j.DefaultOpts,e)}maxColorCount(t){return this._opts.colorCount=t,this}maxDimension(t){return this._opts.maxDimension=t,this}addFilter(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this}removeFilter(t){if(this._opts.filters){const e=this._opts.filters.indexOf(t);e>0&&this._opts.filters.splice(e)}return this}clearFilters(){return this._opts.filters=[],this}quality(t){return this._opts.quality=t,this}useImageClass(t){return this._opts.ImageClass=t,this}useGenerator(t,e){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(e?{name:t,options:e}:t),this}useQuantizer(t,e){return this._opts.quantizer=e?{name:t,options:e}:t,this}build(){return new j(this._src,this._opts)}getPalette(){return this.build().getPalette()}}class pt{constructor(t){this.pipeline=t,this._map={}}names(){return Object.keys(this._map)}has(t){return!!this._map[t]}get(t){return this._map[t]}register(t,e){return this._map[t]=e,this.pipeline}}class de{constructor(){this.filter=new pt(this),this.quantizer=new pt(this),this.generator=new pt(this)}_buildProcessTasks({filters:t,quantizer:e,generators:i}){return i.length===1&&i[0]==="*"&&(i=this.generator.names()),{filters:t.map(a=>n(this.filter,a)),quantizer:n(this.quantizer,e),generators:i.map(a=>n(this.generator,a))};function n(a,s){let o,l;return typeof s=="string"?o=s:(o=s.name,l=s.options),{name:o,fn:a.get(o),options:l}}}async process(t,e){const{filters:i,quantizer:n,generators:a}=this._buildProcessTasks(e),s=await this._filterColors(i,t),o=await this._generateColors(n,s),l=await this._generatePalettes(a,o);return{colors:o,palettes:l}}_filterColors(t,e){return Promise.resolve(he(e,t.map(({fn:i})=>i)))}_generateColors(t,e){return Promise.resolve(t.fn(e.data,t.options))}async _generatePalettes(t,e){const i=await Promise.all(t.map(({fn:n,options:a})=>Promise.resolve(n(e,a))));return Promise.resolve(i.reduce((n,a,s)=>(n[t[s].name]=a,n),{}))}}function _e(r,t,e){return"#"+((1<<24)+(r<<16)+(t<<8)+e).toString(16).slice(1,7)}function be(r,t,e){r/=255,t/=255,e/=255;const i=Math.max(r,t,e),n=Math.min(r,t,e);let a=0,s=0;const o=(i+n)/2;if(i!==n){const l=i-n;switch(s=o>.5?l/(2-i-n):l/(i+n),i){case r:a=(t-e)/l+(t<e?6:0);break;case t:a=(e-r)/l+2;break;case e:a=(r-t)/l+4;break}a/=6}return[a,s,o]}function W(r,t,e){let i,n,a;function s(o,l,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?o+(l-o)*6*u:u<1/2?l:u<2/3?o+(l-o)*(2/3-u)*6:o}if(t===0)i=n=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;i=s(l,o,r+1/3),n=s(l,o,r),a=s(l,o,r-1/3)}return[i*255,n*255,a*255]}class A{static applyFilters(t,e){return e.length>0?t.filter(({r:i,g:n,b:a})=>{var s;for(let o=0;o<e.length;o++)if(!((s=e[o])!=null&&s.call(e,i,n,a,255)))return!1;return!0}):t}static clone(t){return new A(t._rgb,t._population)}get r(){return this._rgb[0]}get g(){return this._rgb[1]}get b(){return this._rgb[2]}get rgb(){return this._rgb}get hsl(){if(!this._hsl){const[t,e,i]=this._rgb;this._hsl=be(t,e,i)}return this._hsl}get hex(){if(!this._hex){const[t,e,i]=this._rgb;this._hex=_e(t,e,i)}return this._hex}get population(){return this._population}toJSON(){return{rgb:this.rgb,population:this.population}}getYiq(){if(!this._yiq){const t=this._rgb;this._yiq=(t[0]*299+t[1]*587+t[2]*114)/1e3}return this._yiq}get titleTextColor(){return this._titleTextColor||(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor}get bodyTextColor(){return this._bodyTextColor||(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor}constructor(t,e){this._rgb=t,this._population=e}}const Et=class yt{constructor(t,e){this._src=t,this.opts=et({},yt.DefaultOpts,e)}static use(t){this._pipeline=t}static from(t){return new ve(t)}get result(){return this._result}_process(t,e){t.scaleDown(this.opts);const i=me(this.opts,e);return yt._pipeline.process(t.getImageData(),i)}async getPalette(){const t=new this.opts.ImageClass;try{const e=await t.load(this._src),i=await this._process(e,{generators:["default"]});this._result=i;const n=i.palettes.default;if(!n)throw new Error("Something went wrong and a palette was not found, please file a bug against our GitHub repo: https://github.com/vibrant-Colors/node-vibrant/");return t.remove(),n}catch(e){return t.remove(),Promise.reject(e)}}async getPalettes(){const t=new this.opts.ImageClass;try{const e=await t.load(this._src),i=await this._process(e,{generators:["*"]});this._result=i;const n=i.palettes;return t.remove(),n}catch(e){return t.remove(),Promise.reject(e)}}};Et.DefaultOpts={colorCount:64,quality:5,filters:[]};let j=Et;j.DefaultOpts.quantizer="mmcq";j.DefaultOpts.generators=["default"];j.DefaultOpts.filters=["default"];j.DefaultOpts.ImageClass=fe;const xt=5,wt=8-xt;class lt{constructor(t,e,i,n,a,s,o){this.histogram=o,this._volume=-1,this._avg=null,this._count=-1,this.dimension={r1:t,r2:e,g1:i,g2:n,b1:a,b2:s}}static build(t){const e=new le(t,{sigBits:xt}),{rmin:i,rmax:n,gmin:a,gmax:s,bmin:o,bmax:l}=e;return new lt(i,n,a,s,o,l,e)}invalidate(){this._volume=this._count=-1,this._avg=null}volume(){if(this._volume<0){const{r1:t,r2:e,g1:i,g2:n,b1:a,b2:s}=this.dimension;this._volume=(e-t+1)*(n-i+1)*(s-a+1)}return this._volume}count(){if(this._count<0){const{hist:t,getColorIndex:e}=this.histogram,{r1:i,r2:n,g1:a,g2:s,b1:o,b2:l}=this.dimension;let u=0;for(let c=i;c<=n;c++)for(let v=a;v<=s;v++)for(let b=o;b<=l;b++){const p=e(c,v,b);t[p]&&(u+=t[p])}this._count=u}return this._count}clone(){const{histogram:t}=this,{r1:e,r2:i,g1:n,g2:a,b1:s,b2:o}=this.dimension;return new lt(e,i,n,a,s,o,t)}avg(){if(!this._avg){const{hist:t,getColorIndex:e}=this.histogram,{r1:i,r2:n,g1:a,g2:s,b1:o,b2:l}=this.dimension;let u=0;const c=1<<8-xt;let v,b,p;v=b=p=0;for(let g=i;g<=n;g++)for(let f=a;f<=s;f++)for(let d=o;d<=l;d++){const E=e(g,f,d),S=t[E];S&&(u+=S,v+=S*(g+.5)*c,b+=S*(f+.5)*c,p+=S*(d+.5)*c)}u?this._avg=[~~(v/u),~~(b/u),~~(p/u)]:this._avg=[~~(c*(i+n+1)/2),~~(c*(a+s+1)/2),~~(c*(o+l+1)/2)]}return this._avg}contains(t){let[e,i,n]=t;const{r1:a,r2:s,g1:o,g2:l,b1:u,b2:c}=this.dimension;return e>>=wt,i>>=wt,n>>=wt,e>=a&&e<=s&&i>=o&&i<=l&&n>=u&&n<=c}split(){const{hist:t,getColorIndex:e}=this.histogram,{r1:i,r2:n,g1:a,g2:s,b1:o,b2:l}=this.dimension,u=this.count();if(!u)return[];if(u===1)return[this.clone()];const c=n-i+1,v=s-a+1,b=l-o+1,p=Math.max(c,v,b);let g=null,f,d;f=d=0;let E=null;if(p===c){E="r",g=new Uint32Array(n+1);for(let _=i;_<=n;_++){f=0;for(let y=a;y<=s;y++)for(let C=o;C<=l;C++){const I=e(_,y,C);t[I]&&(f+=t[I])}d+=f,g[_]=d}}else if(p===v){E="g",g=new Uint32Array(s+1);for(let _=a;_<=s;_++){f=0;for(let y=i;y<=n;y++)for(let C=o;C<=l;C++){const I=e(y,_,C);t[I]&&(f+=t[I])}d+=f,g[_]=d}}else{E="b",g=new Uint32Array(l+1);for(let _=o;_<=l;_++){f=0;for(let y=i;y<=n;y++)for(let C=a;C<=s;C++){const I=e(y,C,_);t[I]&&(f+=t[I])}d+=f,g[_]=d}}let S=-1;const U=new Uint32Array(g.length);for(let _=0;_<g.length;_++){const y=g[_];y&&(S<0&&y>d/2&&(S=_),U[_]=d-y)}const V=this;function O(_){const y=_+"1",C=_+"2",I=V.dimension[y];let k=V.dimension[C];const it=V.clone(),rt=V.clone(),nt=S-I,at=k-S;for(nt<=at?(k=Math.min(k-1,~~(S+at/2)),k=Math.max(0,k)):(k=Math.max(I,~~(S-1-nt/2)),k=Math.min(V.dimension[C],k));!g[k];)k++;let st=U[k];for(;!st&&g[k-1];)st=U[--k];return it.dimension[C]=k,rt.dimension[y]=k+1,[it,rt]}return O(E)}}class Pt{_sort(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)}constructor(t){this._comparator=t,this.contents=[],this._sorted=!1}push(t){this.contents.push(t),this._sorted=!1}peek(t){return this._sort(),t=typeof t=="number"?t:this.contents.length-1,this.contents[t]}pop(){return this._sort(),this.contents.pop()}size(){return this.contents.length}map(t){return this._sort(),this.contents.map(t)}}const pe=.75;function zt(r,t){let e=r.size();for(;r.size()<t;){const i=r.pop();if(i&&i.count()>0){const[n,a]=i.split();if(!n||(r.push(n),a&&a.count()>0&&r.push(a),r.size()===e))break;e=r.size()}else break}}const we=(r,t)=>{if(r.length===0||t.colorCount<2||t.colorCount>256)throw new Error("Wrong MMCQ parameters");const e=lt.build(r);e.histogram.colorCount;const i=new Pt((a,s)=>a.count()-s.count());i.push(e),zt(i,pe*t.colorCount);const n=new Pt((a,s)=>a.count()*a.volume()-s.count()*s.volume());return n.contents=i.contents,zt(n,t.colorCount-n.size()),ye(n)};function ye(r){const t=[];for(;r.size();){const e=r.pop(),i=e.avg();t.push(new A(i,e.count()))}return t}const xe={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function Ce(r){let t=0;return r.forEach(e=>{t=Math.max(t,e.population)}),t}function Le(r,t){return r.Vibrant===t||r.DarkVibrant===t||r.LightVibrant===t||r.Muted===t||r.DarkMuted===t||r.LightMuted===t}function De(r,t,e,i,n,a,s){function o(...u){let c=0,v=0;for(let b=0;b<u.length;b+=2){const p=u[b],g=u[b+1];!p||!g||(c+=p*g,v+=g)}return c/v}function l(u,c){return 1-Math.abs(u-c)}return o(l(r,t),s.weightSaturation,l(e,i),s.weightLuma,n/a,s.weightPopulation)}function Z(r,t,e,i,n,a,s,o,l,u){let c=null,v=0;return t.forEach(b=>{const[,p,g]=b.hsl;if(p>=o&&p<=l&&g>=n&&g<=a&&!Le(r,b)){const f=De(p,s,g,i,b.population,e,u);(c===null||f>v)&&(c=b,v=f)}}),c}function Me(r,t,e){const i={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null};return i.Vibrant=Z(i,r,t,e.targetNormalLuma,e.minNormalLuma,e.maxNormalLuma,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),i.LightVibrant=Z(i,r,t,e.targetLightLuma,e.minLightLuma,1,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),i.DarkVibrant=Z(i,r,t,e.targetDarkLuma,0,e.maxDarkLuma,e.targetVibrantSaturation,e.minVibrantSaturation,1,e),i.Muted=Z(i,r,t,e.targetNormalLuma,e.minNormalLuma,e.maxNormalLuma,e.targetMutesSaturation,0,e.maxMutesSaturation,e),i.LightMuted=Z(i,r,t,e.targetLightLuma,e.minLightLuma,1,e.targetMutesSaturation,0,e.maxMutesSaturation,e),i.DarkMuted=Z(i,r,t,e.targetDarkLuma,0,e.maxDarkLuma,e.targetMutesSaturation,0,e.maxMutesSaturation,e),i}function Se(r,t,e){if(!r.Vibrant&&!r.DarkVibrant&&!r.LightVibrant){if(!r.DarkVibrant&&r.DarkMuted){let[i,n,a]=r.DarkMuted.hsl;a=e.targetDarkLuma,r.DarkVibrant=new A(W(i,n,a),0)}if(!r.LightVibrant&&r.LightMuted){let[i,n,a]=r.LightMuted.hsl;a=e.targetDarkLuma,r.DarkVibrant=new A(W(i,n,a),0)}}if(!r.Vibrant&&r.DarkVibrant){let[i,n,a]=r.DarkVibrant.hsl;a=e.targetNormalLuma,r.Vibrant=new A(W(i,n,a),0)}else if(!r.Vibrant&&r.LightVibrant){let[i,n,a]=r.LightVibrant.hsl;a=e.targetNormalLuma,r.Vibrant=new A(W(i,n,a),0)}if(!r.DarkVibrant&&r.Vibrant){let[i,n,a]=r.Vibrant.hsl;a=e.targetDarkLuma,r.DarkVibrant=new A(W(i,n,a),0)}if(!r.LightVibrant&&r.Vibrant){let[i,n,a]=r.Vibrant.hsl;a=e.targetLightLuma,r.LightVibrant=new A(W(i,n,a),0)}if(!r.Muted&&r.Vibrant){let[i,n,a]=r.Vibrant.hsl;a=e.targetMutesSaturation,r.Muted=new A(W(i,n,a),0)}if(!r.DarkMuted&&r.DarkVibrant){let[i,n,a]=r.DarkVibrant.hsl;a=e.targetMutesSaturation,r.DarkMuted=new A(W(i,n,a),0)}if(!r.LightMuted&&r.LightVibrant){let[i,n,a]=r.LightVibrant.hsl;a=e.targetMutesSaturation,r.LightMuted=new A(W(i,n,a),0)}}const Ve=(r,t)=>{t=Object.assign({},xe,t);const e=Ce(r),i=Me(r,e,t);return Se(i,e,t),i},ke=new de().filter.register("default",(r,t,e,i)=>i>=125&&!(r>250&&t>250&&e>250)).quantizer.register("mmcq",we).generator.register("default",Ve);j.use(ke);var Te=$('<button class="svelte-1uha8ag">Sign Out</button>'),Ie=$('<button class="svelte-1uha8ag">Sign In</button>'),Pe=$('<p class="err svelte-1uha8ag"> </p>'),ze=$('<div class="svelte-1uha8ag"></div>'),Ee=$('<img class="cover svelte-1uha8ag" alt="album art" width="520" height="520"/>'),Oe=$('<div class="layout svelte-1uha8ag"><div class="left svelte-1uha8ag"><h1 class="title svelte-1uha8ag"> </h1> <div class="sub svelte-1uha8ag"> </div> <div class="progress svelte-1uha8ag"><!></div> <div class="times svelte-1uha8ag"> </div> <section class="info svelte-1uha8ag"><h3 class="svelte-1uha8ag">General Track Information</h3> <div class="kv svelte-1uha8ag"><div> </div> <div> </div></div></section></div> <div class="right svelte-1uha8ag"><div class="artwrap svelte-1uha8ag"><!> <div aria-hidden="true"></div></div></div></div>'),Ae=$('<div class="playing-zero svelte-1uha8ag" role="region" aria-label="Nothing is playing"><div class="zero-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Nothing is playing</h2> <p class="lead svelte-1uha8ag">Start playback on any Spotify device to show album art and the vinyl visualizer.</p> <p class="hint svelte-1uha8ag">Tip: open Spotify on your phone, laptop or web player and press play.</p></div></div>'),Ne=$("<!> <!>",1),Re=$('<p class="err svelte-1uha8ag"> </p>'),He=$('<!> <div class="zero-state svelte-1uha8ag" role="region" aria-label="Sign in to Sonora"><div class="zero-card svelte-1uha8ag"><h2 class="svelte-1uha8ag">Youâ€™re signed out</h2> <p class="lead svelte-1uha8ag">Sign in with Spotify to show currently playing tracks, album art and the vinyl visualizer.</p> <button class="btn svelte-1uha8ag">Sign in with Spotify</button> <p class="hint svelte-1uha8ag">No account? Visit <a href="https://spotify.com" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">spotify.com</a>.</p></div></div>',1),$e=$("<div><span></span> <span> </span> <!></div> <!>",1);function Qe(r,t){Yt(t,!1);const e=F(),i=F(),n=F(),a="Sonora ðŸŽ§";function s(){try{document.title=a}catch{}}let l=["Vibrant","DarkVibrant","DarkMuted","Muted"];{try{const m=new URL(location.href).searchParams.get("swatch");m&&(l=m.split(",").map(w=>w.trim()).filter(Boolean))}catch{}window.__VIBRANT_SWATCH_ORDER=l}let u=F(!1),c=F(null),v=F(null),b=null,p=F(null),g,f=F(null),d=F(null);function E(m){const w=Math.floor((m||0)/1e3),L=Math.floor(w/60),N=String(w%60).padStart(2,"0");return`${L}:${N}`}async function S(){try{const m=await ee();x(c,m||null),x(p,null);const w=m?.item?.id||null;w&&w!==b&&(b=w,x(v,m?.item?.popularity==null?await ie(w):null))}catch(m){x(p,String(m))}}function U(){re(),x(u,!1),x(c,null),x(v,null),b=null,g&&(clearInterval(g),g=null),s()}async function V(m){try{if(!m){x(f,null),x(d,null);return}const w=await j.from(m).getPalette();let L=null;for(const N of l)if(w?.[N]){L=w[N];break}if(L||(L=Object.values(w).find(Boolean)||null),L?.rgb){const[N,G,Q]=L.rgb;x(f,`rgba(${Math.round(N)}, ${Math.round(G)}, ${Math.round(Q)}, 1)`),x(d,`rgba(${Math.round(N)}, ${Math.round(G)}, ${Math.round(Q)}, 1)`)}else L?.hex?(x(f,L.hex),x(d,L.hex)):(x(f,null),x(d,null))}catch{x(f,null),x(d,null)}}Gt(async()=>{x(u,te()),h(u)&&(await S(),g=setInterval(S,1e3)),s()}),Qt(()=>{g&&clearInterval(g)}),tt(()=>h(c),()=>{x(e,h(c)?.item)}),tt(()=>h(e),()=>{x(i,h(e)?.album?.images?.[0]?.url||"")}),tt(()=>(h(e),h(v)),()=>{x(n,h(e)?.popularity??h(v)?.popularity??null)}),tt(()=>h(i),()=>{h(i)&&V(h(i))}),tt(()=>oe,()=>{s()}),Xt(),jt();var O=$e(),_=_t(O);let y;var C=D(_),I=z(C,2),k=D(I);M(I);var it=z(I,2);{var rt=m=>{var w=Te();dt("click",w,U),H(m,w)},nt=m=>{var w=Ie();dt("click",w,function(...L){kt?.apply(this,L)}),H(m,w)};J(it,m=>{h(u)?m(rt):m(nt,!1)})}M(_);var at=z(_,2);{var st=m=>{var w=Ne(),L=_t(w);{var N=T=>{var P=Pe(),Y=D(P,!0);M(P),K(()=>B(Y,h(p))),H(T,P)};J(L,T=>{h(p)&&T(N)})}var G=z(L,2);{var Q=T=>{var P=Oe(),Y=D(P),ht=D(Y),At=D(ht,!0);M(ht);var ct=z(ht,2),Nt=D(ct);M(ct);var gt=z(ct,2),Rt=D(gt);{var Ht=R=>{var X=ze();K(vt=>It(X,vt),[()=>(h(c),h(e),q(()=>`width:${Math.min(100,100*(h(c)?.progress_ms||0)/h(e).duration_ms)}%`))]),H(R,X)};J(Rt,R=>{h(e),q(()=>h(e).duration_ms)&&R(Ht)})}M(gt);var ft=z(gt,2),$t=D(ft);M(ft);var Ct=z(ft,2),Lt=z(D(Ct),2),mt=D(Lt),qt=D(mt);M(mt);var Dt=z(mt,2),Ut=D(Dt);M(Dt),M(Lt),M(Ct),M(Y);var Mt=z(Y,2),St=D(Mt),Vt=D(St);{var Ft=R=>{var X=Ee();K(()=>Zt(X,"src",h(i))),H(R,X)};J(Vt,R=>{h(i)&&R(Ft)})}var Wt=z(Vt,2);M(St),M(Mt),M(P),K((R,X,vt,Bt)=>{It(P,`--label:url(${h(i)}); --glow:${h(f)??""}; --glow-soft:${h(d)??""};`),B(At,(h(e),q(()=>h(e).name))),B(Nt,`${R??""} â€¢ ${h(e),q(()=>h(e).album?.name)??""}`),B($t,`${X??""} / ${vt??""}
                    ${h(c),q(()=>h(c)?.is_playing?"â€¢ Playing":"â€¢ Paused")??""}`),B(qt,`â³ Duur: ${Bt??""}`),B(Ut,`ðŸ”¥ Populariteit: ${h(n)??"â€“"??""}`),bt(Wt,1,`vinyl ${h(c),q(()=>h(c)?.is_playing?"spinning":"")??""}`,"svelte-1uha8ag")},[()=>(h(e),q(()=>h(e).artists?.map(R=>R.name).join(", "))),()=>(h(c),q(()=>E(h(c)?.progress_ms))),()=>(h(e),q(()=>E(h(e).duration_ms))),()=>(h(e),q(()=>E(h(e).duration_ms)))]),H(T,P)},ut=T=>{var P=Ae();H(T,P)};J(G,T=>{h(e)?T(Q):T(ut,!1)})}H(m,w)},Ot=m=>{var w=He(),L=_t(w);{var N=T=>{var P=Re(),Y=D(P,!0);M(P),K(()=>B(Y,h(p))),H(T,P)};J(L,T=>{h(p)&&T(N)})}var G=z(L,2),Q=D(G),ut=z(D(Q),4);Kt(2),M(Q),M(G),dt("click",ut,function(...T){kt?.apply(this,T)}),H(m,w)};J(at,m=>{h(u)?m(st):m(Ot,!1)})}K(m=>{y=bt(_,1,"status svelte-1uha8ag",null,y,m),bt(C,1,`dot ${h(u)?"green":"red"}`,"svelte-1uha8ag"),B(k,`Status: ${h(u)?"Connected":"Disconnected"}`)},[()=>({connected:h(u),disconnected:!h(u)})]),H(r,O),Jt()}export{Qe as component};
